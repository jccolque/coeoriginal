{% extends 'base_inventario.html' %}
{% load static %}
{% block content %}
    <div class="beneficiario container">
        <div class="row">
            <h2>Listado General de Documentos</h2>
            {% if perms.operadores.menu_documentos %}
                <a class="nuevo_item" href="{% url 'documentos:cargar_documento' %}">
                    Cargar Nuevo Documento
                    <img class="icons" src="/static/admin/img/icon-addlink.svg" alt="Crear Nuevo Usuario">
                </a>
            {% endif %}
        </div>
        <div class="row">
        <div>
            <table class="listado tables" id="table">
                <thead>
                    <tr>
                        <th>SubComite</th>
                        <th>Estado</th>
                        <th>Nombre</th>
                        <th>Tipo</th>
                        <th>Autor</th>
                        <th>Fecha Actualizacion</th>
                        <th>Administrar</th>
                        <th>Descargar Ultima Version</th>
                    </tr>
                </thead>
                <tbody>
                    {% for documento in documentos %}
                        <tr>
                            <td data-title="SubComite: ">
                                <a href="{% url 'documentos:lista_subcomite' subco_id=documento.subcomite.id %}">
                                    {{documento.subcomite}}
                                </a>
                            </td>
                            <td data-title="Estado: ">
                                {% if documento.publico %}
                                    <img class="iconsx2" src="/static/img/icons/public.png" alt="Es Publico">
                                {% else %}
                                    <img class="iconsx2" src="/static/img/icons/private.png" alt="Es Privado">
                                {% endif %}
                            </td>
                            <td data-title="Nombre: ">{{documento.nombre}}</td>
                            <td data-title="Tipo: ">{{documento.get_tipo_display}}</td>
                            <td data-title="Autor: ">{{documento.autor}}</td>
                            <td data-title="Fecha Actualizacion: ">{{documento.ultima_version.fecha}}</td>
                            <td data-title="Administrar: "><a href="{% url 'documentos:ver_documento' documento_id=documento.id %}">Documento</a></td>
                            {% if documento.ultima_version %}
                                {% if documento.ultima_version.archivo %}
                                    <td><a href="{{documento.ultima_version.archivo.url}}">Descargar</a></td>
                                {% else %}
                                    <td><p>Sin Archivos Cargados</p></td>
                                {% endif %}
                            {% else %}
                                <td><p>Sin Archivos Cargados</p></td>
                            {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}