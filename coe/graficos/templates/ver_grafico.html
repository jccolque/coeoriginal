{% extends 'base_graficos.html' %}

{% load static %}
{% load seguridad_tags%}

{% block content %}
    <section class="resumen">
        <section class="informacion_basica">
            <div class="container">
                <div class="row">        
                    <h2><b>{{grafico.verbose_name}}</b></h2>
                    <div class="col-md-8">
                        <hr>
                        <p><b>Columnas:</b> {{grafico.columnas}}</p>
                        <p><b>Ultima Actualizacion:</b> {{grafico.update}}</p>
                        <p><b>Tipo:</b> {{grafico.get_tipo_display}}</p>
                        <p><b>Es Publico:</b>
                            {% if grafico.publico %}
                                Publicado
                            {% else %}
                                Privado
                            {% endif %}
                        </p>
                        <hr>
                        {% include 'lineas.html' with graf_datos=grafico %}
                    </div>
                    <div class="col-md-4">
                        <ul class="menu_botones">
                            <li><a href="{% url 'graficos:mod_grafico' grafico_id=grafico.id %}">Editar Grafico</a></li>
                            {% if grafico.publico %}
                                <li><a href="{% url 'graficos:cambiar_estado' grafico_id=grafico.id  %}">Hacer Privado</a></li>
                            {% else %}
                                <li><a href="{% url 'graficos:cambiar_estado' grafico_id=grafico.id  %}">Hacer Publico</a></li>
                            {% endif %}
                            <hr>
                            <li><a href="{% url 'graficos:crear_dato' grafico_id=grafico.id  %}">Agregar Dato</a></li>
                            <li><a href="{% url 'graficos:reniciar_datos' grafico_id=grafico.id  %}">Reiniciar Datos</a></li>
                        </ul>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <table class="listado" id="table">
                            <thead>
                                <tr>
                                    <th>Columna</th>
                                    <th>Fila</th>
                                    <th>Valor</th>
                                    <th>Modificar</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for dato in grafico.datos.all %}
                                    <tr>
                                        <td>{{dato.nombre}}</td>
                                        <td>{{dato.ref}}</td>
                                        <td>{{dato.valor}}</td>
                                        <td>
                                            <a href="{% url 'graficos:mod_dato' grafico_id=grafico.id dato_id=dato.id %}">
                                                <img class="icons" src="{% static '/img/icons/change.png' %}">
                                            </a>
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </section>
{% endblock %}